<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Âæ™Áí∞„Ç∑„Éü„É•„É¨„Éº„Çø„Éº</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="app-container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="header">
            <h1>Âæ™Áí∞„Ç∑„Éü„É•„É¨„Éº„Çø„Éº</h1>
            <div class="controls">
                <button id="startBtn" class="btn btn-primary">‚ñ∂ „Çπ„Çø„Éº„Éà</button>
                <button id="toggleParamsBtn" type="button" class="btn btn-secondary">üìã „Éë„É©„É°„Éº„Çø</button>
                <button id="openSettingsBtn" type="button" class="btn btn-secondary">‚öô Ë®≠ÂÆö</button>
                <button id="resetBtn" class="btn btn-secondary">‚Ü∫ „É™„Çª„ÉÉ„Éà</button>
                <div class="speed-control">
                    <label>ÈÄüÂ∫¶: <span id="speedValue" class="speed-value">1</span>x</label>
                    <input type="range" id="speedSlider" min="0" max="100" value="50" step="1">
                </div>
            </div>
        </header>

        <div class="main-content">
            <!-- „Ç∞„É©„Éï„Ç®„É™„Ç¢ -->
            <main class="charts-area">
                <!-- „É¢„Éã„Çø„Éº + „Éë„É©„É°„Éº„Çø -->
                <div class="monitor-section">
                    <aside class="params-panel" id="paramsPanel">
                        <h2>„Éë„É©„É°„Éº„Çø</h2>
                        <div class="param-select">
                            <label for="paramGroupSelect">È†ÖÁõÆ</label>
                            <select id="paramGroupSelect">
                                <option value="heart" selected>ÂøÉÊãç</option>
                                <option value="vein">ÈùôËÑà</option>
                                <option value="la">Â∑¶Êàø</option>
                                <option value="mitral">ÂÉßÂ∏ΩÂºÅ</option>
                                <option value="lv">Â∑¶ÂÆ§</option>
                                <option value="aortic-valve">Â§ßÂãïËÑàÂºÅ</option>
                                <option value="aorta">Â§ßÂãïËÑà</option>
                            </select>
                        </div>

                        <div class="param-section param-group" data-group="heart">
                            <div class="param-section-header">ÂøÉÊãç</div>
                            <div class="param-content">
                                <div class="param-row">
                                    <label>HR (bpm)</label>
                                    <input type="number" id="param-hr" value="75" min="30" max="200">
                                </div>
                                <div class="param-row">
                                    <label>PRÈñìÈöî (sec)</label>
                                    <input type="number" id="param-pr" value="0.15" step="0.01" min="-0.2" max="0.3">
                                </div>
                            </div>
                        </div>

                        <div class="param-section param-group" data-group="vein">
                            <div class="param-section-header">ÈùôËÑà</div>
                            <div class="param-content">
                                <div class="param-row">
                                    <label>Pv (mmHg)</label>
                                    <input type="number" id="param-pv" value="8" step="1" min="0" max="30">
                                </div>
                                <div class="param-row">
                                    <label>Rv (mmHg¬∑s/mL)</label>
                                    <input type="number" id="param-rv" value="0.05" step="0.001" min="0.001" max="0.1">
                                </div>
                            </div>
                        </div>

                        <div class="param-section param-group" data-group="la">
                            <div class="param-section-header">Â∑¶Êàø</div>
                            <div class="param-content">
                                <div class="param-row">
                                    <label>Â∑¶ÊàøÂèéÁ∏Æ</label>
                                    <select id="param-la-contraction">
                                        <option value="on" selected>„ÅÇ„Çä</option>
                                        <option value="off">„Å™„Åó</option>
                                    </select>
                                </div>
                                <div class="param-row">
                                    <label>LA Ees (mmHg/mL)</label>
                                    <input type="number" id="param-la-ees" value="0.25" step="0.01" min="0.05" max="1">
                                </div>
                                <div class="param-row">
                                    <label>LA Œ± (mmHg)</label>
                                    <input type="number" id="param-la-alpha" value="0.12" step="0.01" min="0.01" max="1">
                                </div>
                                <div class="param-row">
                                    <label>LA Œ≤ (1/mL)</label>
                                    <input type="number" id="param-la-beta" value="0.05" step="0.01" min="0.01" max="0.2">
                                </div>
                                <div class="param-row">
                                    <label>LA V0 (mL)</label>
                                    <input type="number" id="param-la-v0" value="0" step="1" min="0" max="20">
                                </div>
                            </div>
                        </div>

                        <div class="param-section param-group" data-group="mitral">
                            <div class="param-section-header">ÂÉßÂ∏ΩÂºÅ</div>
                            <div class="param-content">
                                <div class="param-row">
                                    <label>MS</label>
                                    <select id="param-ms">
                                        <option value="off" selected>„Å™„Åó</option>
                                        <option value="on">„ÅÇ„Çä</option>
                                    </select>
                                </div>
                                <div class="param-row">
                                    <label>MVA (cm^2)</label>
                                    <input type="number" id="param-ms-mva" value="1.5" step="0.1" min="0.2" max="5">
                                </div>
                                <div class="param-row">
                                    <label>MVA Ê≠£Â∏∏ (cm^2)</label>
                                    <input type="number" id="param-mv-area" value="4.0" step="0.1" min="1" max="8">
                                </div>
                                <div class="param-row">
                                    <label>MR</label>
                                    <select id="param-mr">
                                        <option value="off" selected>„Å™„Åó</option>
                                        <option value="on">„ÅÇ„Çä</option>
                                    </select>
                                </div>
                                <div class="param-row">
                                    <label>MR EROA (cm^2)</label>
                                    <input type="number" id="param-mr-eroa" value="0.2" step="0.01" min="0" max="5">
                                </div>
                                <div class="param-row">
                                    <label>MR Cd</label>
                                    <input type="number" id="param-mr-cd" value="0.75" step="0.01" min="0.1" max="1.2">
                                </div>
                                <div class="param-row">
                                    <label>Rm (mmHg¬∑s/mL)</label>
                                    <input type="number" id="param-rm" value="0.01" step="0.001" min="0.001" max="0.1">
                                </div>
                                <div class="param-row">
                                    <label>Lm (mmHg¬∑s¬≤/mL)</label>
                                    <input type="number" id="param-lm" value="0.0001" step="0.0001" min="0.0001" max="0.01">
                                </div>
                            </div>
                        </div>

                        <div class="param-section param-group" data-group="lv">
                            <div class="param-section-header">Â∑¶ÂÆ§</div>
                            <div class="param-content">
                                <div class="param-row">
                                    <label>LV Ees (mmHg/mL)</label>
                                    <input type="number" id="param-lv-ees" value="2.3" step="0.1" min="0.5" max="5">
                                </div>
                                <div class="param-row">
                                    <label>LV Œ± (mmHg)</label>
                                    <input type="number" id="param-lv-alpha" value="0.03" step="0.01" min="0.01" max="0.2">
                                </div>
                                <div class="param-row">
                                    <label>LV Œ≤ (1/mL)</label>
                                    <input type="number" id="param-lv-beta" value="0.05" step="0.01" min="0.01" max="0.2">
                                </div>
                                <div class="param-row">
                                    <label>LV V0 (mL)</label>
                                    <input type="number" id="param-lv-v0" value="0" step="1" min="0" max="20">
                                </div>
                            </div>
                        </div>

                        <div class="param-section param-group" data-group="aortic-valve">
                            <div class="param-section-header">Â§ßÂãïËÑàÂºÅ</div>
                            <div class="param-content">
                                <div class="param-row">
                                    <label>AS</label>
                                    <select id="param-as">
                                        <option value="off" selected>„Å™„Åó</option>
                                        <option value="on">„ÅÇ„Çä</option>
                                    </select>
                                </div>
                                <div class="param-row">
                                    <label>AVA (cm^2)</label>
                                    <input type="number" id="param-as-ava" value="1.5" step="0.1" min="0.2" max="5">
                                </div>
                                <div class="param-row">
                                    <label>AR</label>
                                    <select id="param-ar">
                                        <option value="off" selected>„Å™„Åó</option>
                                        <option value="on">„ÅÇ„Çä</option>
                                    </select>
                                </div>
                                <div class="param-row">
                                    <label>AR EROA (cm^2)</label>
                                    <input type="number" id="param-ar-eroa" value="0.3" step="0.01" min="0" max="5">
                                </div>
                                <div class="param-row">
                                    <label>AR Cd</label>
                                    <input type="number" id="param-ar-cd" value="0.88" step="0.01" min="0.1" max="1.2">
                                </div>
                                <div class="param-row">
                                    <label>Ra (mmHg¬∑s/mL)</label>
                                    <input type="number" id="param-ra" value="0.02" step="0.001" min="0.001" max="0.1">
                                </div>
                                <div class="param-row">
                                    <label>La (mmHg¬∑s¬≤/mL)</label>
                                    <input type="number" id="param-la-inert" value="0.0001" step="0.0001" min="0.0001" max="0.01">
                                </div>
                            </div>
                        </div>

                        <div class="param-section param-group" data-group="aorta">
                            <div class="param-section-header">Â§ßÂãïËÑà</div>
                            <div class="param-content">
                                <div class="param-row">
                                    <label>Ca (mL/mmHg)</label>
                                    <input type="number" id="param-ca" value="1.5" step="0.1" min="0.5" max="5">
                                </div>
                                <div class="param-row">
                                    <label>Ao Area (cm^2)</label>
                                    <input type="number" id="param-ao-area" value="4.0" step="0.1" min="1" max="10">
                                </div>
                                <div class="param-row">
                                    <label>SVR (dyn¬∑s/cm‚Åµ)</label>
                                    <input type="number" id="param-svr" value="1200" step="50" min="400" max="4000">
                                </div>
                            </div>
                        </div>
                    </aside>

                    <!-- Áîü‰Ωì„É¢„Éã„Çø„Éº„Çª„ÇØ„Ç∑„Éß„É≥ -->
                    <div class="vital-monitor">
                        <div class="monitor-vitals">
                            <div class="vital-item vital-hr" data-vital-item="hr">
                                <span class="vital-label">HR</span>
                                <span class="vital-value" id="vital-hr">75</span>
                            </div>
                            <div class="vital-item vital-bp" data-vital-item="art">
                                <span class="vital-label">ART</span>
                                <span class="vital-values">
                                    <span class="vital-value" id="vital-sys">120</span>/<span class="vital-value vital-dia"
                                        id="vital-dia">80</span>(<span id="vital-map">93</span>)
                                </span>
                            </div>
                            <div class="vital-item vital-lap" data-vital-item="lap">
                                <span class="vital-label">LAP</span>
                                <span class="vital-values">
                                    <span class="vital-value" id="vital-lap-max">12</span>/<span
                                        class="vital-value vital-dia" id="vital-lap-min">5</span>(<span
                                        id="vital-lap-mean">8</span>)
                                </span>
                            </div>
                            <div class="vital-item vital-lvp" data-vital-item="lvp">
                                <span class="vital-label">LVP</span>
                                <span class="vital-values">
                                    <span class="vital-value" id="vital-lvp-max">120</span>/<span
                                        class="vital-value vital-dia" id="vital-lvp-min">5</span>(<span
                                        id="vital-lvp-mean">40</span>)
                                </span>
                            </div>
                            <div class="vital-item vital-other" data-vital-item="co">
                                <span class="vital-label">CO</span>
                                <span class="vital-value" id="vital-co">5.0</span>
                            </div>
                            <div class="vital-item vital-other" data-vital-item="sv">
                                <span class="vital-label">SV</span>
                                <span class="vital-value" id="vital-sv">70</span>
                            </div>
                            <div class="vital-item vital-other" data-vital-item="svr">
                                <span class="vital-label">SVR</span>
                                <span class="vital-value" id="vital-svr">1200</span>
                            </div>
                            <div class="vital-item vital-other" data-vital-item="lvedp">
                                <span class="vital-label">LVEDP</span>
                                <span class="vital-value" id="vital-lvedp">8</span>
                            </div>
                        </div>
                        <div class="monitor-waveforms">
                            <!-- ÂøÉÈõªÂõ≥ -->
                            <div class="monitor-row">
                                <canvas id="chart-ecg"></canvas>
                            </div>
                            <!-- ÂúßÊ≥¢ÂΩ¢ -->
                            <div class="monitor-row monitor-row-large">
                                <canvas id="chart-pressure"></canvas>
                            </div>
                            <!-- ÂºÅFlow -->
                            <div class="monitor-row">
                                <canvas id="chart-flow"></canvas>
                            </div>
                            <!-- „Ç®„É©„Çπ„Çø„É≥„Çπ -->
                            <div class="monitor-row monitor-row-small">
                                <canvas id="chart-elastance"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- „Åù„ÅÆ‰ªñ„ÅÆ„Ç∞„É©„Éï -->
                <div class="charts-grid">

                    <!-- Â∑¶ÊàøPV„É´„Éº„Éó -->
                    <div class="chart-container">
                        <h3>Â∑¶Êàø PV„É´„Éº„Éó</h3>
                        <canvas id="chart-la-pv"></canvas>
                    </div>

                    <!-- Â∑¶ÂÆ§PV„É´„Éº„Éó -->
                    <div class="chart-container">
                        <h3>Â∑¶ÂÆ§ PV„É´„Éº„Éó</h3>
                        <canvas id="chart-lv-pv"></canvas>
                    </div>

                    <!-- Âæ™Áí∞Âπ≥Ë°°ÔºàCO/VRÔºâ -->
                    <div class="chart-container">
                        <h3>Âæ™Áí∞Âπ≥Ë°°ÔºàCO/VRÔºâ</h3>
                        <canvas id="chart-balance"></canvas>
                    </div>
                </div>


            </main>
        </div>
    </div>

    <div id="settingsModal" class="modal-overlay" hidden>
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ë°®Á§∫È†ÖÁõÆ„Éª„Çπ„Ç±„Éº„É´Ë®≠ÂÆö</h3>
                <button id="closeSettingsBtn" type="button" class="btn btn-secondary">Èñâ„Åò„Çã</button>
            </div>
            <div class="modal-body">
                <div class="modal-section">
                    <h4>Ê≥¢ÂΩ¢Ë°®Á§∫È†ÖÁõÆ</h4>
                    <div class="toggle-grid">
                        <label><input type="checkbox" class="waveform-toggle" value="art" checked> ART</label>
                        <label><input type="checkbox" class="waveform-toggle" value="lvp" checked> LVP</label>
                        <label><input type="checkbox" class="waveform-toggle" value="lap" checked> LAP</label>
                        <label><input type="checkbox" class="waveform-toggle" value="avFlow" checked> AV flow</label>
                        <label><input type="checkbox" class="waveform-toggle" value="mvFlow" checked> MV flow</label>
                        <label><input type="checkbox" class="waveform-toggle" value="pvFlow" checked> PV flow</label>
                        <label><input type="checkbox" class="waveform-toggle" value="laElastance" checked> LA elastance</label>
                        <label><input type="checkbox" class="waveform-toggle" value="lvElastance" checked> LV elastance</label>
                    </div>
                </div>
                <div class="modal-section">
                    <h4>„É¢„Éã„Çø„Éº„Çπ„Ç±„Éº„É´</h4>
                    <div class="modal-grid">
                        <label>Âúß Max (LV/AO)
                            <input type="number" class="scale-input" id="monitor-pressure-lv-ao-max" value="150" step="10" min="50" max="300">
                        </label>
                        <label>Âúß Max (LA)
                            <input type="number" class="scale-input" id="monitor-pressure-la-max" value="40" step="5" min="5" max="80">
                        </label>
                        <label>Flow Max
                            <input type="number" class="scale-input" id="scale-flow-max" value="1200" step="100" min="200" max="2000">
                        </label>
                        <label>Flow Min
                            <input type="number" class="scale-input" id="scale-flow-min" value="-200" step="50" min="-500" max="0">
                        </label>
                        <label>E Max
                            <input type="number" class="scale-input" id="scale-elastance-max" value="3" step="0.5" min="1" max="10">
                        </label>
                    </div>
                </div>
                <div class="modal-section">
                    <h4>PV„É´„Éº„Éó„Çπ„Ç±„Éº„É´</h4>
                    <div class="modal-grid">
                        <label>LA V Max
                            <input type="number" class="scale-input" id="la-pv-vmax" value="120" min="20" max="200">
                        </label>
                        <label>LA P Max
                            <input type="number" class="scale-input" id="la-pv-pmax" value="40" min="5" max="50">
                        </label>
                        <label>LV V Max
                            <input type="number" class="scale-input" id="lv-pv-vmax" value="150" min="50" max="300">
                        </label>
                        <label>LV P Max
                            <input type="number" class="scale-input" id="lv-pv-pmax" value="200" min="50" max="300">
                        </label>
                    </div>
                </div>
                <div class="modal-section">
                    <h4>Âæ™Áí∞Âπ≥Ë°°„Çπ„Ç±„Éº„É´</h4>
                    <div class="modal-grid">
                        <label>X Max (LAP)
                            <input type="number" class="scale-input" id="balance-x-max" value="20" step="1" min="5" max="50">
                        </label>
                        <label>Y Max (CO/VR)
                            <input type="number" class="scale-input" id="balance-y-max" value="12" step="1" min="4" max="20">
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/constants.js"></script>
    <script src="js/simulation.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/main.js"></script>
</body>

</html>
